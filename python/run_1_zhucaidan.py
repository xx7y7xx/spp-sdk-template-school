# coding=utf-8import os,sysimport shutilimport commonimport configimport bucfgimport  checkbuild import run_100_log  ################################prdZhucaidanTXT = "%szhucaidan.txt"%(bucfg.prdUi)##################################### 主菜单按钮(个数、名字)def process():	print '-------------------------------'	print common.encodeChinese('>> 整理主菜单按钮信息')	print ''		# print common.encodeChinese("主菜单按钮缺失标题文件，开始修复。")		if not os.path.isfile(prdZhucaidanTXT):			run_17_log.message += common.encodeChinese("\n主菜单文件................")		checkbuild.checkReqFile(prdZhucaidanTXT)		print ">>>"+prdZhucaidanTXT			# print common.encodeChinese("主菜单按钮数据修复完成。")		domString   = "JSON_ZHUCAIDAN = {"	domString += getCategorys()	domString += "\n}"	common.writeNewFile("%s\\json\\json_zhucaidan.js"%(bucfg.targetDir),domString.decode("gbk").encode("utf8"))	print ''	def getCategorys():		domString = ""	# 先获取zhucaidan的路径	paths = os.listdir(bucfg.prdUi)	for file in paths:		if file.find(".svn")>-1:			continue		if file.find("zhucaidan.txt")>-1:			content_info = common.readEachLine(bucfg.prdUi+file)			length = len(content_info)			# print length			for i_info in content_info:				numstr = i_info.split("@")[0]				btn_info = i_info.split("@")[1]				domString += "\n\t\""+numstr+"\" : {"				domString += "\n\t\t\"chinese\": \""+btn_info.split("\n")[0]+"\""				if i_info == content_info[length-1]:					domString += "\n\t}"				else:					domString += "\n\t},"	return domString